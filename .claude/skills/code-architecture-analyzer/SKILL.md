---
name: code-architecture-analyzer
description: 智能代码架构解读和分析工具，支持多语言项目架构识别、设计模式分析、依赖关系梳理、技术栈识别和代码质量评估。特别适合复杂项目的架构文档生成和技术债务识别。
allowed-tools:
  - Read
  - Glob
  - Grep
  - Bash
metadata:
  version: "1.0.0"
  author: "Claude Code"
  category: "development"
  tags: ["architecture", "analysis", "code-review", "documentation"]
---

# 代码架构解读分析师

## 概述
这是一个专业的代码架构分析skill，能够深入解读各种编程语言和框架的项目架构，生成详细的架构文档，识别设计模式，分析依赖关系，并提供改进建议。

## 核心功能

### 1. 项目架构识别
- **目录结构分析**：识别项目的组织方式和架构模式
- **配置文件解析**：理解package.json、requirements.txt、.csproj等配置
- **构建流程分析**：识别构建脚本、CI/CD配置、部署流程
- **技术栈识别**：自动识别使用的语言、框架、数据库、中间件

### 2. 代码质量分析
- **设计模式识别**：检测常见的设计模式（单例、工厂、观察者等）
- **代码结构评估**：分析类的职责、方法的复杂度、耦合度
- **命名规范检查**：评估命名一致性和可读性
- **最佳实践建议**：提供符合语言特性的改进建议

### 3. 依赖关系分析
- **模块依赖图**：生成模块间的依赖关系图
- **包管理分析**：分析外部依赖的版本、兼容性、安全性
- **循环依赖检测**：识别潜在的循环依赖问题
- **架构层次分析**：识别表现层、业务层、数据层的分离

### 4. 多语言支持
- **C#/.NET**：Unity项目、ASP.NET应用、WPF应用
- **Python**：Django/Flask Web应用、数据分析项目、AI/ML项目
- **JavaScript/TypeScript**：React/Vue/Angular前端应用、Node.js后端
- **Java**：Spring Boot应用、Android项目
- **Go**：微服务、CLI工具
- **其他**：基于文件模式识别的通用支持

## 使用流程

### 阶段1：项目扫描和识别
1. **扫描项目根目录**：识别项目类型和主要配置文件
2. **技术栈检测**：分析依赖文件和代码特征
3. **架构模式识别**：确定使用的架构风格（MVC、微服务、分层等）
4. **专用分析器调用**：基于项目类型调用相应的专业分析器

### 阶段2：深度代码分析
1. **核心模块分析**：识别主要的功能模块和组件
2. **设计模式检测**：搜索和分析常见设计模式的应用
3. **代码质量评估**：评估代码的可维护性、可扩展性、性能

### 阶段3：架构文档生成
1. **架构概览**：生成高层次的架构描述
2. **模块详细说明**：描述每个模块的职责和接口
3. **依赖关系图**：生成模块依赖和调用关系
4. **改进建议**：提供具体的架构和代码改进建议

## 输出格式

### 架构报告结构
```markdown
# 项目架构分析报告

## 执行摘要
- 项目概述
- 技术栈总结
- 架构风格
- 关键发现

## 详细分析
### 1. 项目结构分析
- 目录组织
- 配置文件解析
- 构建流程
- 部署架构

### 2. 技术栈分析
- 编程语言
- 框架和库
- 数据存储
- 第三方服务

### 3. 架构模式识别
- 设计模式
- 架构风格
- 数据流
- 控制流

### 4. 代码质量评估
- 代码组织
- 命名规范
- 复杂度分析
- 测试覆盖

### 5. 依赖关系分析
- 模块依赖图
- 外部依赖分析
- 潜在问题识别

### 6. 改进建议
- 架构优化
- 代码重构
- 性能提升
- 安全加固
```

## 特殊功能

### Unity项目专项分析
- **组件架构**：MonoBehaviour组件的组织和通信
- **资源管理**：Asset、Prefab、ScriptableObject的使用模式
- **性能分析**：内存管理、GC优化、渲染优化建议
- **平台兼容性**：跨平台代码的架构设计

### AI项目专项分析
- **数据处理流**：ETL管道、特征工程流程
- **模型管理**：模型版本管理、训练/推理分离
- **实验管理**：实验追踪、超参数优化架构
- **部署架构**：模型服务化、批处理、实时推理

### Web应用专项分析
- **前后端分离**：API设计、数据交互模式
- **状态管理**：全局状态、组件状态的管理策略
- **路由架构**：页面路由、权限控制的设计
- **性能优化**：代码分割、缓存策略、CDN使用

## 使用指南

### 基础使用
```
请分析这个项目的整体架构，识别使用的技术栈和设计模式。
```

### 深度分析
```
对这个项目进行全面的架构分析，包括：
1. 生成详细的架构文档
2. 识别所有使用的设计模式
3. 分析模块间的依赖关系
4. 提供架构改进建议
5. 评估代码质量和可维护性
```

### 特定问题分析
```
分析这个Unity项目的性能瓶颈，重点关注：
1. 内存分配和GC压力
2. 渲染优化机会
3. 组件通信效率
4. 资源加载策略
```

## 示例输出

### Unity项目架构示例
```markdown
## Unity项目架构分析

### 技术栈
- **Unity版本**: 2022.3.5f1
- **脚本后端**: Mono IL2CPP
- **渲染管线**: Built-in Render Pipeline
- **依赖包**: 无外部Package依赖

### 架构模式
- **MVC模式**: 清晰的模型-视图-控制器分离
- **对象池模式**: 高效的GameObject重用机制
- **事件驱动**: 松耦合的组件通信
- **状态机**: 游戏状态管理

### 核心模块
1. **Animation模块** (`Animation/`)
   - BasicCoinAnimation: 金币动画控制器
   - 支持直线、抛物线、收集三种动画类型

2. **管理器模块** (`Examples/`)
   - SimpleCoinManager: 金币生命周期管理
   - BasicCoinDemo: 功能演示和测试

### 性能特征
- **对象池化**: 减少GC压力，支持50+并发动画
- **协程驱动**: 非阻塞的动画执行
- **轻量设计**: 仅4个核心文件，极简架构
```

### Python AI项目架构示例
```markdown
## AI项目架构分析

### 技术栈
- **语言**: Python 3.13
- **核心框架**: LangGraph, LangChain
- **AI模型**: OpenAI GPT, Anthropic Claude
- **数据格式**: JSON, Markdown

### 架构模式
- **工作流模式**: 基于LangGraph的状态机工作流
- **代理模式**: 专业化AI代理协作
- **工具集成**: 通过MCP协议集成外部工具
- **配置驱动**: 环境变量和配置文件管理

### 核心模块
1. **工作流引擎** (`src/tech_learning_workflow.py`)
   - 状态图定义和管理
   - 代理间协调和数据传递

2. **专业化代理** (`agents/`)
   - 研究代理：技术资料收集和分析
   - 学习代理：个性化学习方案生成
```

## 注意事项

### 分析精度
- 分析结果基于代码静态结构，可能需要结合运行时信息
- 对于复杂项目，建议分阶段进行分析
- 设计模式识别基于常见模式，可能遗漏自定义模式

### 性能考虑
- 大型项目分析可能需要较长时间
- 建议先分析核心目录，再逐步扩展
- 可以通过过滤文件类型来提高分析效率

### 安全性
- 不会执行代码，仅进行静态分析
- 敏感配置文件会被识别但不展示内容
- 分析结果中不会包含API密钥等敏感信息

## 质量保证

### 分析可信度
- **高置信度**: 明确的设计模式、标准的项目结构
- **中置信度**: 推断的架构意图、常见的设计选择
- **低置信度**: 复杂的自定义模式、特定业务逻辑

### 建议优先级
- **P0**: 严重架构问题、安全漏洞、性能瓶颈
- **P1**: 代码质量问题、维护性问题
- **P2**: 最佳实践建议、优化机会

---

*代码架构解读分析师 - 深度理解项目设计，洞察技术架构精髓*