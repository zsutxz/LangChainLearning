# RAGç³»ç»Ÿé…ç½®æ–‡ä»¶

# æ•°æ®é…ç½®
data:
  data_path: "./data"
  persist_path: "./vector_store"
  file_types:
    - "**/*.txt"
    - "**/*.md"
    - "**/*.pdf"
    - "**/*.docx"
    - "**/*.csv"

# å‘é‡æ•°æ®åº“é…ç½®
vector_store:
  type: "chroma"  # chroma, faiss, pinecone, weaviate, qdrant
  collection_name: "rag_collection"

  # Chromaé…ç½®
  chroma:
    persist_directory: "./vector_store/chroma"

  # Pineconeé…ç½®
  pinecone:
    api_key: "${PINECONE_API_KEY}"
    environment: "us-west1-gcp"
    index_name: "rag-index"

  # Weaviateé…ç½®
  weaviate:
    url: "http://localhost:8080"
    index_name: "Document"

  # Qdranté…ç½®
  qdrant:
    path: "./vector_store/qdrant"

  # FAISSé…ç½®
  faiss:
    save_path: "./vector_store/faiss"

# åµŒå…¥æ¨¡å‹é…ç½®
embeddings:
  model: "openai"  # openai, huggingface, instruct

  # OpenAIåµŒå…¥
  openai:
    model_name: "text-embedding-ada-002"
    api_key: "${OPENAI_API_KEY}"

  # HuggingFaceåµŒå…¥
  huggingface:
    model_name: "sentence-transformers/all-MiniLM-L6-v2"
    device: "cpu"

  # InstructåµŒå…¥
  instruct:
    model_name: "hkunlp/instructor-large"
    device: "cpu"

# æ–‡æ¡£å¤„ç†é…ç½®
document_processing:
  chunk_size: 1000
  chunk_overlap: 200
  chunk_strategy: "recursive"  # recursive, token, semantic, markdown

  # é€’å½’åˆ†å‰²é…ç½®
  recursive:
    separators: ["\n\n", "\n", " ", ""]

  # Tokenåˆ†å‰²é…ç½®
  token:
    encoding_name: "cl100k_base"  # tiktokenç¼–ç 

  # è¯­ä¹‰åˆ†å‰²é…ç½®
  semantic:
    breakpoint_threshold_type: "percentile"
    breakpoint_threshold_amount: 95

  # Markdownåˆ†å‰²é…ç½®
  markdown:
    headers:
      - ["#", "Header 1"]
      - ["##", "Header 2"]
      - ["###", "Header 3"]

# æ£€ç´¢é…ç½®
retrieval:
  strategy: "semantic"  # semantic, hybrid, multi_query, contextual
  top_k: 5
  search_type: "similarity"  # similarity, mmr

  # MMRé…ç½®
  mmr:
    fetch_k: 20
    lambda_mult: 0.5

  # æ··åˆæ£€ç´¢é…ç½®
  hybrid:
    dense_weight: 0.7
    sparse_weight: 0.3

  # å¤šæŸ¥è¯¢é…ç½®
  multi_query:
    num_queries: 3

  # é‡æ’é…ç½®
  rerank:
    enabled: true
    model: "cross-encoder/ms-marco-MiniLM-L-6-v2"
    top_n: 10

# LLMé…ç½®
llm:
  provider: "openai"  # openai, anthropic, huggingface

  # OpenAIé…ç½®
  openai:
    model_name: "gpt-3.5-turbo"
    temperature: 0.1
    max_tokens: 1000
    api_key: "${OPENAI_API_KEY}"

  # Anthropicé…ç½®
  anthropic:
    model_name: "claude-3-sonnet-20240229"
    temperature: 0.1
    max_tokens: 1000
    api_key: "${ANTHROPIC_API_KEY}"

# æç¤ºæ¨¡æ¿é…ç½®
prompts:
  qa_template: |
    ä½¿ç”¨ä»¥ä¸‹ä¸Šä¸‹æ–‡æ¥å›ç­”é—®é¢˜ã€‚å¦‚æœæ— æ³•åŸºäºä¸Šä¸‹æ–‡å›ç­”ï¼Œè¯·è¯´"æˆ‘æ²¡æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥å›ç­”è¿™ä¸ªé—®é¢˜"ã€‚

    ä¸Šä¸‹æ–‡ï¼š
    {context}

    é—®é¢˜ï¼š{question}

    ç­”æ¡ˆï¼š

  qa_with_citations: |
    åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜ï¼Œå¹¶åœ¨ç­”æ¡ˆä¸­ä½¿ç”¨[1], [2]ç­‰æ ¼å¼å¼•ç”¨æ¥æºã€‚

    ä¸Šä¸‹æ–‡ï¼š
    {context}

    é—®é¢˜ï¼š{question}

    ç­”æ¡ˆï¼ˆåŒ…å«å¼•ç”¨ï¼‰ï¼š

  conversational: |
    ä½ æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„AIåŠ©æ‰‹ã€‚ä½¿ç”¨æä¾›çš„ä¸Šä¸‹æ–‡æ¥å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚
    å¦‚æœä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·è¯šå®åœ°è¯´æ˜ã€‚

    ä¸Šä¸‹æ–‡ï¼š
    {context}

    èŠå¤©å†å²ï¼š
    {chat_history}

    å½“å‰é—®é¢˜ï¼š{question}

    å›ç­”ï¼š

# è¯„ä¼°é…ç½®
evaluation:
  metrics:
    - "accuracy"
    - "retrieval_precision"
    - "retrieval_recall"
    - "answer_relevance"
    - "faithfulness"

  # è¯„ä¼°æ•°æ®é›†
  dataset_path: "./data/evaluation.json"

  # è¾“å‡ºè·¯å¾„
  output_path: "./results/evaluation"

# æ—¥å¿—é…ç½®
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "./logs/rag_system.log"
  max_size: "10MB"
  backup_count: 5

# APIæœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
api:
  host: "0.0.0.0"
  port: 8000
  debug: false

  # CORSé…ç½®
  cors:
    allow_origins: ["*"]
    allow_methods: ["GET", "POST"]
    allow_headers: ["*"]

  # è®¤è¯é…ç½®
  auth:
    enabled: false
    api_key_header: "X-API-Key"
    api_keys: []

# Streamlitåº”ç”¨é…ç½®ï¼ˆå¯é€‰ï¼‰
streamlit:
  title: "RAGé—®ç­”ç³»ç»Ÿ"
  page_icon: "ğŸ”"
  layout: "wide"
  sidebar_state: "expanded"

  # ç•Œé¢é…ç½®
  ui:
    show_sources: true
    show_metadata: true
    max_context_length: 1000

  # ä¼šè¯é…ç½®
  session:
    max_history: 10
    clear_on_submit: false